# remap prefix to Control + a
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf

# set other defaults
set -g default-shell /bin/zsh
set -g mode-keys vi
set -g status-keys emacs
set -g escape-time 0
set -g focus-events on
set -g renumber-windows on
set -g word-separators ' =*@|:;,(){}[]"'

# setup the status bar
set -g display-time 4000
set -g status-interval 1
set -g status-bg black
set -g status-fg brightyellow
set -g status-left ""
set -g status-right "#(date '+%b %e %T')"
set-window-option -g window-status-current-style bg=brightblack
set-window-option -g window-status-current-style fg=brightwhite
set-window-option -g automatic-rename on

# window history
set -g history-limit 50000

# Create new windows in current working directory
bind c new-window -c "#{pane_current_path}"
# More straight forward key bindings for splitting
unbind %
bind | split-window -h -c "#{pane_current_path}"
bind h split-window -h -c "#{pane_current_path}"
unbind '"'
bind - split-window -v -c "#{pane_current_path}"
bind v split-window -v -c "#{pane_current_path}"

# support direct access to 20 windows
set -g base-index 1
bind  0  select-window -t:10
bind F1  select-window -t:11
bind F2  select-window -t:12
bind F3  select-window -t:13
bind F4  select-window -t:14
bind F5  select-window -t:15
bind F6  select-window -t:16
bind F7  select-window -t:17
bind F8  select-window -t:18
bind F9  select-window -t:19
bind F10 select-window -t:20
bind F11 select-window -t:21

bind < swap-window -t:-1
bind > swap-window -t:+1

# session commands
#bind C new-session

# pane commands
bind j join-pane -h -s !
bind PgUp resize-pane -U 5
bind PgDn resize-pane -D 5
bind Home resize-pane -L 5
bind End resize-pane -R 5

# Enable mouse mode (tmux 2.1 and above)
set -g mouse on

# Clipboard integration for Wayland/GNOME (OSC 52 + pipes)
set -s set-clipboard on
set -g allow-passthrough on
set -as terminal-features ',*:clipboard'
# Fallback copy command (wl-copy if available)
set -s copy-command 'wl-copy'  # Skip if no wl-clipboard

# Vi copy mode: select with v, yank with y/Enter to clipboard
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel 'wl-copy'
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel 'wl-copy'

# Mouse drag selects/copies to primary (Ptyxis handles system paste)
# Triple-click line or double-click word enters copy-mode vi for refine+yank

# Rather than constraining window size to the maximum size of any client
# connected to the *session*, constrain window size to the maximum size of any
# client connected to *that window*. Much more reasonable.
setw -g aggressive-resize on

# Tmux Plugin Manager
set -g @plugin 'tmux-plugins/tpm'

# Tmux Sessionist
set -g @plugin 'tmux-plugins/tmux-sessionist'

# Tmux Resurrect
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-capture-pane-contents 'on'
#set -g @resurrect-processes 'false'
#set -g @resurrect-strategy-vim 'session'
set -g @resurrect-processes '"vim->echo vi *"'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'
set -g @continuum-save-interval '5'
set -g @resurrect-delete-backup-after '7'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
